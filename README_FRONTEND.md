# Transparent Search Frontend

ç‹¬ç«‹ã—ãŸ React ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ + Node.js Express ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã®æ§‹æˆã§ã™ã€‚

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ–ãƒ©ã‚¦ã‚¶  â”‚
â”‚  (ãƒãƒ¼ãƒˆ 8081)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Express Proxy Server   â”‚
â”‚   (frontend/server.js)  â”‚
â”‚       ãƒãƒ¼ãƒˆ 8081       â”‚
â”‚  - React ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡   â”‚
â”‚  - /api ãƒ—ãƒ­ã‚­ã‚·        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ /api ã‚’ãƒ—ãƒ­ã‚­ã‚·
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI Backend    â”‚
â”‚     (main.py)        â”‚
â”‚     ãƒãƒ¼ãƒˆ 8080      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
cd frontend
npm install
```

### 2. React ã‚’ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

### 3. Express ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•

```bash
npm start
```

**çµæœï¼š** http://localhost:8081 ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

## ğŸ”§ ç’°å¢ƒå¤‰æ•°

`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```env
# Express Server
PORT=8081
BACKEND_URL=http://localhost:8080

# React
REACT_APP_API_BASE_URL=http://localhost:8081/api
```

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
frontend/
â”œâ”€â”€ server.js                    # Express ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ package.json                 # Node.js ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ .env.example                 # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ public/
â”‚   â””â”€â”€ index.html               # HTML ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.js                 # React ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ App.js                   # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ App.css                  # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ SearchBox.js         # æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹
â”‚       â”œâ”€â”€ SearchBox.css
â”‚       â”œâ”€â”€ ResultsList.js       # æ¤œç´¢çµæœãƒªã‚¹ãƒˆ
â”‚       â”œâ”€â”€ ResultsList.css
â”‚       â”œâ”€â”€ Pagination.js        # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
â”‚       â”œâ”€â”€ Pagination.css
â”‚       â”œâ”€â”€ LoadingSpinner.js    # ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
â”‚       â”œâ”€â”€ LoadingSpinner.css
â”‚       â”œâ”€â”€ ErrorMessage.js      # ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
â”‚       â””â”€â”€ ErrorMessage.css
â””â”€â”€ build/                       # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆnpm run build å¾Œï¼‰
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Docker ã§å®Ÿè¡Œ

```bash
docker-compose up frontend
```

### æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. React ãƒ“ãƒ«ãƒ‰
```bash
cd frontend
npm run build
```

2. ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
```bash
BACKEND_URL=https://api.example.com npm start
```

## ğŸ“¡ API é€šä¿¡

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®é€šä¿¡ãƒ•ãƒ­ãƒ¼

1. **ãƒ–ãƒ©ã‚¦ã‚¶ãŒ `/api/search?q=...` ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**
   ```javascript
   fetch('/api/search?q=keyword')
   ```

2. **Express ã‚µãƒ¼ãƒãƒ¼ãŒå—ã‘å–ã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ãƒ—ãƒ­ã‚­ã‚·**
   ```
   http://localhost:8081/api/search?q=keyword
   â†’ http://localhost:8080/api/search?q=keyword
   ```

3. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆFastAPIï¼‰ãŒå¿œç­”**
   ```json
   {
     "data": [...],
     "meta": { "count": 100 }
   }
   ```

4. **Express ãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«è¿”ã™**

## ğŸ”Œ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ |
|-------------|------|
| `GET /api/search` | æ¤œç´¢å®Ÿè¡Œ |
| `GET /api/docs` | API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (Swagger) |
| `GET /health` | ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ |
| `GET /admin` | ç®¡ç†æƒ…å ± |

## ğŸ›  ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¸ã®æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# BACKEND_URL ã‚’ç¢ºèª
echo $BACKEND_URL

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
curl http://localhost:8080/health
```

### ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

```bash
# ãƒãƒ¼ãƒˆ 8081 ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
lsof -i :8081

# åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
PORT=3000 npm start
```

### React ãƒ“ãƒ«ãƒ‰ã®å•é¡Œ

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm -rf node_modules package-lock.json
npm install

# ãƒ“ãƒ«ãƒ‰å†å®Ÿè¡Œ
npm run build
```

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

âœ… **å®Ÿè£…æ¸ˆã¿**
- CORS ãƒ˜ãƒƒãƒ€ãƒ¼ã®è¨­å®š
- ãƒ—ãƒ­ã‚­ã‚·ã§ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®ç®¡ç†
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

## ğŸ“ ãƒ­ã‚°å‡ºåŠ›

ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•æ™‚ã«ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
ğŸš€ Frontend Server Configuration:
   Frontend Port: 8081
   Backend URL: http://localhost:8080
   React Build Dir: /path/to/frontend/build

âœ… Frontend server running on http://0.0.0.0:8081
âœ… Backend proxy configured: http://localhost:8080

ğŸ“ Navigation:
   Frontend: http://localhost:8081
   API Docs: http://localhost:8081/api/docs
   Health Check: http://localhost:8081/health

âš¡ Ready to accept requests
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- Express ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è¨­å®šæ¸ˆã¿
- CORS ãŒé–‹ç™ºç’°å¢ƒç”¨ã«è¨­å®šæ¸ˆã¿ï¼ˆæœ¬ç•ªç’°å¢ƒã§ã¯å¤‰æ›´æ¨å¥¨ï¼‰
- ãƒ—ãƒ­ã‚­ã‚·ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…æ¸ˆã¿

## ğŸ“š å‚è€ƒè³‡æ–™

- [React ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://react.dev)
- [Express.js ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://expressjs.com)
- [http-proxy ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/http-party/node-http-proxy)
- [FastAPI ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://fastapi.tiangolo.com)
